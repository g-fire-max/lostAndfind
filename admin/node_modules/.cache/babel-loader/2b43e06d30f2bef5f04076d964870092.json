{"remainingRequest":"E:\\lostAndfind\\admin\\node_modules\\babel-loader\\lib\\index.js!E:\\lostAndfind\\admin\\src\\http.js","dependencies":[{"path":"E:\\lostAndfind\\admin\\src\\http.js","mtime":1587486477911},{"path":"E:\\lostAndfind\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\lostAndfind\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlcic7CnZhciBodHRwID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FkbWluL2FwaScKfSk7Cmh0dHAuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBpZiAobG9jYWxTdG9yYWdlLnRva2VuKSB7CiAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLnRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8v5YWo5bGA5ZON5bqU5oum5oiqCgpodHRwLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIHJldHVybiByZXM7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICAvLyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgLy/lh7rplJnml7YKICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkgewogICAgVnVlLnByb3RvdHlwZS4kbWVzc2FnZSh7CiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIG1lc3NhZ2U6IGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UKICAgIH0pOwoKICAgIGlmIChlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgfQogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwpleHBvcnQgZGVmYXVsdCBodHRwOw=="},{"version":3,"sources":["E:/lostAndfind/admin/src/http.js"],"names":["axios","Vue","router","http","create","baseURL","interceptors","request","use","config","localStorage","token","headers","Authorization","error","Promise","reject","response","res","err","data","message","prototype","$message","type","status","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,IAAMC,IAAI,GAAGH,KAAK,CAACI,MAAN,CAAa;AACtBC,EAAAA,OAAO,EAAC;AADc,CAAb,CAAb;AAIAF,IAAI,CAACG,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAUC,MAAV,EAAkB;AAC5C,MAAGC,YAAY,CAACC,KAAhB,EAAsB;AAClBF,IAAAA,MAAM,CAACG,OAAP,CAAeC,aAAf,GAA8B,YAAYH,YAAY,CAACC,KAAvD;AACH;;AAED,SAAOF,MAAP;AACH,CAND,EAMG,UAAUK,KAAV,EAAiB;AAChB,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CARD,E,CAUA;;AACAX,IAAI,CAACG,YAAL,CAAkBW,QAAlB,CAA2BT,GAA3B,CAA+B,UAAAU,GAAG,EAAI;AAClC,SAAOA,GAAP;AACH,CAFD,EAEG,UAAAC,GAAG,EAAI;AACN;AACA;AACA,MAAGA,GAAG,CAACF,QAAJ,CAAaG,IAAb,CAAkBC,OAArB,EAA6B;AACzBpB,IAAAA,GAAG,CAACqB,SAAJ,CAAcC,QAAd,CAAuB;AACnBC,MAAAA,IAAI,EAAC,OADc;AAEnBH,MAAAA,OAAO,EAACF,GAAG,CAACF,QAAJ,CAAaG,IAAb,CAAkBC;AAFP,KAAvB;;AAKA,QAAGF,GAAG,CAACF,QAAJ,CAAaQ,MAAb,KAAwB,GAA3B,EAAgC;AAC5BvB,MAAAA,MAAM,CAACwB,IAAP,CAAY,QAAZ;AACH;AACJ;;AAED,SAAOX,OAAO,CAACC,MAAR,CAAeG,GAAf,CAAP;AACH,CAjBD;AAqBA,eAAehB,IAAf","sourcesContent":["import axios from 'axios'\r\nimport Vue from 'vue'\r\nimport router from './router' \r\n\r\nconst http = axios.create({\r\n    baseURL:'http://localhost:3000/admin/api'\r\n})\r\n\r\nhttp.interceptors.request.use(function (config) {\r\n    if(localStorage.token){\r\n        config.headers.Authorization ='Bearer ' + localStorage.token\r\n    }\r\n    \r\n    return config;\r\n}, function (error) {\r\n    return Promise.reject(error)\r\n});\r\n\r\n//全局响应拦截\r\nhttp.interceptors.response.use(res => {\r\n    return res\r\n}, err => {\r\n    // console.log(err.response.data.message\r\n    //出错时\r\n    if(err.response.data.message){\r\n        Vue.prototype.$message({\r\n            type:'error',\r\n            message:err.response.data.message\r\n        })\r\n\r\n        if(err.response.status === 401) {\r\n            router.push('/login')\r\n        }\r\n    }\r\n\r\n    return Promise.reject(err)\r\n} )\r\n\r\n\r\n\r\nexport default http"]}]}